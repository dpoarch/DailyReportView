<%= javascript_include_tag "cart" %>
<h1>My Mall</h1>
<div class="row">
    <div class="col-md-10">
        <div class="row">
            <% @products.each do |p| %>
                <div class="col-md-4" >
                    <div class="card mb-4 box-shadow">
                        <div style="width: 100%; height: 210px;text-align: center">
                            <%= image_tag(p.product.image , :style =>"width: auto; height: 200px;", :class =>"card-img-top") %>
                        </div>
                        <div class="card-body">
                            <b><%= p.product.name%></b>
                            <p class="card-text"><%= p.product.description%></p>
                            <p class="card-text">Price: &#36; <%= p.price%></p>
                            <p class="card-text">Store:<b> <%= p.location.description%></b></p>
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="btn-group">
                                <a href="javascript:void()" class="btn btn-sm btn-outline-secondary add-cart" data-url="<%= addcart_cart_path(p) %>">Add Cart</a>
                                <%= link_to "Add Cart", addcart_cart_path(p), formats: :html, method: :post, remote: true, class: "btn btn-sm btn-outline-secondary add-cart" %>
                                </div>
                                <small class="text-muted"> <%= p.quantity>0? "#{p.quantity} #{p.uom} available":'SOLD' %></small>
                            </div>
                        </div>
                    </div>
                </div>
            <% end %>
        </div>
    </div>
    <div class="col-md-2">
        <div class="row">
        <% @products.each do |p| %>
            <div class="col-md-11" >
                <div class="card mb-12 box-shadow">
                    <div style="width: 100%; height: 105px;text-align: center">
                        <%= image_tag(p.product.image , :style =>"width: auto; height: 100px;", :class =>"card-img-top") %>
                    </div>
                    <div class="card-body">
                        <ul style="list-style-type:none">
                            <li>
                                <small><%= p.product.name%></small>
                            </li>
                            <li>
                                <small class="card-text">Price: &#36; <%= p.price%> </small>
                            </li>
                            <li>
                                <small class="card-text">Quantity: &#36; <%= p.quantity%> </small>
                            </li>
                            <li>
                                <small class="card-text">Total: &#36; <%= p.quantity*p.price %> </small>
                            </li>
                        </ul>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="btn-group">
                            <%= link_to "Remove Cart", addcart_cart_path(p), method: :post, remote: true, class: "btn btn-sm btn-outline-secondary add-cart" %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <% end %>
    </div>
    </div>
</div>
<%= javascript_include_tag "/js/cart" %>

